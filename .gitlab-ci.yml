image: "python:3.7"

before_script:
  - cat /etc/os-release
  - pip install -r requirements.txt
  - pip install coverage pytest pytest-cov

stages:
  - build
  - test
  - deploy

# build-job:
#   stage: build
#   script:
#     - echo "Hello, $GITLAB_USER_LOGIN!"

# test-job1:
#   stage: test
#   script:
#     - echo "This job does nothing :D"

pytest-aidan:
  stage: test
  script:
    - echo "This job runs the tests in the logic folder for Aidan"
    - cd tests
    - python -m pytest as_image_proc_tests.py -v --cov

pytest-jessica:
  stage: test
  script:
    - echo "This job runs the tests in the logic folder"
    - cd tests
    - apt-get update
    - echo "y" | apt-get install ffmpeg
    - python -m pytest jz_image_proc_tests.py -v --cov

pytest-john:
  stage: test
  script:
    - echo "This job runs the tests in the logic folder for John"
    - cd tests
    - python -m pytest john_logic_tests.py -v --cov

# deploy-prod:
#   stage: deploy
#   script:
#     - echo "This job deploys something from the $CI_COMMIT_BRANCH branch."